(function(){"use strict";var t={5290:function(t,e,n){var r=n(9963),i=n(6252);const s={id:"app"};function o(t,e,n,r,o,l){const a=(0,i.up)("CLI");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(a,{ref:"cliRef"},null,512)])}var l=n(2262),a=n(3577);const c=t=>((0,i.dD)("data-v-bfd9ce3c"),t=t(),(0,i.Cn)(),t),u={class:"cli-main"},h=c((()=>(0,i._)("span",{class:"cli-head"},"stonesaw.github.io ",-1))),p={class:"cli-dir"},d=c((()=>(0,i._)("span",{class:"cli-head"}," $ ",-1))),_={class:"cli-input-history"},f=["innerHTML"],g=c((()=>(0,i._)("span",{class:"cli-head"},"stonesaw.github.io ",-1))),m={class:"cli-dir"},y=c((()=>(0,i._)("span",{class:"cli-head"}," $ ",-1)));function v(t,e,n,r,s,o){const l=(0,i.up)("CLIStart"),c=(0,i.up)("CLIInput");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(l),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.histories,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"cli-history"},[h,(0,i._)("span",p,(0,a.zw)(t.dir.join("/")),1),d,(0,i._)("span",_,(0,a.zw)(t.input),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.result_ary,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i._)("span",{class:"cli-result",innerHTML:t},null,8,f)])))),128))])))),128)),(0,i._)("div",null,[g,(0,i._)("span",m,(0,a.zw)(t.working_dir.join("/")),1),y,(0,i.Wm)(c,{ref:"input",onExecCmd:t.inputEnter,onComplementDir:t.inputTab},null,8,["onExecCmd","onComplementDir"])])])}n(6699);const w={class:"cli-start"},x=(0,i._)("div",null,[(0,i._)("div",null," _       __     __                             __           ________    ____   __"),(0,i._)("div",null,"| |     / /__  / /________  ____ ___  ___     / /_____     / ____/ /   /  _/  / /"),(0,i._)("div",null,"| | /| / / _ \\/ / ___/ __ \\/ __ `__ \\/ _ \\   / __/ __ \\   / /   / /    / /   / / "),(0,i._)("div",null,"| |/ |/ /  __/ / /__/ /_/ / / / / / /  __/  / /_/ /_/ /  / /___/ /____/ /   /_/  "),(0,i._)("div",null,"|__/|__/\\___/_/\\___/\\____/_/ /_/ /_/\\___/   \\__/\\____/   \\____/_____/___/  (_)   ")],-1),b=(0,i._)("div",null,"Welcome to cli",-1),I=[x,b];function k(t,e){return(0,i.wg)(),(0,i.iD)("div",w,I)}var T=n(3744);const $={},C=(0,T.Z)($,[["render",k]]);var D=C;function O(t,e,n,s,o,l){return(0,i.wg)(),(0,i.iD)("span",{class:"cli-input",onKeydown:[e[2]||(e[2]=(0,r.D2)(((...e)=>t.pressKeyUp&&t.pressKeyUp(...e)),["up"])),e[3]||(e[3]=(0,r.D2)(((...e)=>t.pressKeyDown&&t.pressKeyDown(...e)),["down"])),e[4]||(e[4]=(0,r.D2)(((...e)=>t.pressKeyTab&&t.pressKeyTab(...e)),["tab"]))]},[(0,i.wy)((0,i._)("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=e=>t.inputText=e),type:"text",autofocus:"",maxlength:"50",onKeydown:e[1]||(e[1]=(0,r.D2)(((...e)=>t.pressKeyEnter&&t.pressKeyEnter(...e)),["enter"]))},null,544),[[r.nr,t.inputText]])],32)}var E=(0,i.aZ)({emits:["exec-cmd","complement-dir"],data(){return{inputText:"",history:[],historyIndex:null,inputCurrent:""}},mounted(){this.loadHistory()},methods:{focus(){this.$refs.input.focus()},loadHistory(){if(localStorage.getItem("history"))try{this.history=JSON.parse(localStorage.getItem("history"))}catch(t){localStorage.removeItem("history")}},saveHistory(){const t=JSON.stringify(this.history);localStorage.setItem("history",t)},clearHistory(){this.history=[]},pressKeyEnter(){this.$emit("exec-cmd",this.inputText),""!==this.inputText&&this.history[this.history.length-1]!==this.inputText&&(this.history.push(this.inputText),this.historyIndex=null,this.saveHistory()),this.inputText="",this.inputCurrent=""},pressKeyTab(t){t.preventDefault(),this.$emit("complement-dir",this.inputText)},pressKeyUp(t){t.preventDefault(),this.history.length>0&&(null===this.historyIndex&&(this.historyIndex=this.history.length,this.inputCurrent=this.inputText),this.historyIndex=Math.max(this.historyIndex-1,0),this.inputText=this.history[this.historyIndex])},pressKeyDown(t){t.preventDefault(),this.history.length>0&&null!==this.historyIndex&&(this.historyIndex===this.history.length-1?(this.historyIndex=null,this.inputText=this.inputCurrent):(this.historyIndex=Math.min(this.historyIndex+1,this.history.length-1),this.inputText=this.history[this.historyIndex]))}}});const j=(0,T.Z)(E,[["render",O],["__scopeId","data-v-4fae8f1f"]]);var H=j;function S(t,e){const n=Object.prototype.toString.call(e).slice(8,-1);return void 0!==e&&null!==e&&n===t}function A(t){return S("Object",t)}function K(t){return null!=t&&void 0!=t&&t!==[]&&t!=={}}const L=n(7832);function M(t,e="./"){const n=e.split("/").filter((t=>""!==t&&"."!==t)),r="~"===n[0]?n:t.concat(n);let i=L;const s=[],o=[];for(let a=0;a<r.length;a++){const t=r[a];if(".."===t)o.length<=0||(i=s[s.length-1]||L,s.pop(),o.pop());else{if(void 0==i[t])return{error:"そのようなファイルやディレクトリはありません",dir_name:o,files_list:i};s.push(i),o.push(t),i=i[t]}}"~"!==o[0]&&(o.unshift("~"),i=i["~"]);const l=A(i)?"dir":i;return"dir"===l?{dir_name:o,type:l,files_list:i}:{dir_name:o,type:i[0],content:i[1]}}function Z(t,e="./"){const n=e.split("/").filter((t=>""!==t&&"."!==t)),r=M(t,e);if("dir"===r.type||r.error){let t;if(t="dir"===r.type?Object.keys(r.files_list):Object.keys(r.files_list).filter((t=>RegExp(`^${n[n.length-1]||""}.*`).test(t))),0===t.length)return{dir:null};if(1===t.length){let e;return e="dir"===r.type?n.join("/")+"/"+t[0]:1===n.length?t[0]:n.splice(0,n.length-1).join("/")+"/"+t[0],{dir:e}}{let e="";const n=[];return t.forEach((t=>n.push([t,r.files_list[t]]))),n.forEach((t=>{e=A(t[1])?e.concat(t[0],"/   "):e.concat(t[0],"    ")})),{dirs:e}}}return null}function F(t,e){const n=M(t,e[0]||"~");return void 0!=n.error?{error:n["error"]}:"dir"!==n.type?{error:`${e[0]}: ディレクトリではありません`}:{msg:`debug: cd (${t.join("/")} -> ${n.dir_name.join("/")})`,data:n.dir_name}}function R(t,e){const n=M(t,e[0]);if(void 0!=n.error)return[n.error,null];if("dir"!==n.type)return[`${e[0]}: ディレクトリではありません`,null];let r="";for(const[i,s]of Object.entries(n.files_list))r=A(s)?r.concat(i,"/   "):r.concat(i,"    ");return[r,null]}function U(t,e){if(!K(e[0])||"-h"===e[0]||"--help"===e[0])return["cat help",null];const n=M(t,e[0]);return void 0!=n.error?[n.error,null]:"txt"!==n.type?[`${e[0]}: テキストファイルではありません`,null]:[n.content,null]}function J(t){if(t.includes("-clear"))return localStorage.removeItem("history"),["clear history",null];let e=[];if(!localStorage.getItem("history"))return["no history",null];try{e=JSON.parse(localStorage.getItem("history")||"")}catch(i){localStorage.removeItem("history")}const n=Math.log10(e.length)+1;let r="";return e.forEach(((t,e)=>{r+=` ${e.toString().padStart(n," ")}  ${t}\n`})),[r.replace(/\n$/,""),null]}function N(t,e){if(!K(e[0])||"-h"===e[0]||"--help"===e[0])return{msg:"open help"};const n=M(t,e[0]);return void 0!=n.error?{error:n.error}:"link"!==n.type?{error:`${e[0]}: リンクではありません`}:{data:n.content}}var W=(0,i.aZ)({name:"CLI",components:{CLIStart:D,CLIInput:H},data(){return{inputText:"",working_dir:["~","cli"],histories:[],commands:[{name:"cd",args:"[dir]",desc:"change directory."},{name:"ls",args:"[dir]",desc:"list segments."},{name:"cat",args:"[file]",desc:"show txt file content."},{name:"history",args:"[-clear]",desc:"command history."},{name:"lang",args:"[en|ja]",desc:"change language."},{name:"open",args:"[link_file]",desc:"open link file."},{name:"editor",args:"[-close|-C]",desc:"open editor."},{name:"share",args:"[-tw]",desc:"share sns."}],afterInputActions:[]}},methods:{focus(){this.$refs.input.focus()},inputEnter(t){const e=this.execCommand(t);var n;null===e[0]?n=null:"html"===e[1]?n=e[0].split("\n"):(n=this.textToHtml(e[0]).split("\n"),n=n.map((t=>""===t?"&nbsp;":t))),this.histories.push({input:t,dir:this.working_dir,result_ary:n}),this.afterInputActions.forEach((t=>{t(this)})),this.afterInputActions=[]},inputTab(t){const e=t.split(" ").filter((t=>""!==t));if(0===e.length||!["cd","ls"].includes(e[0]))return null;const n=Z(this.working_dir,e[1]);if(n.dirs){let e=this.textToHtml(n.dirs).split("\n");e=e.map((t=>""===t?"&nbsp;":t)),this.histories.push({input:t,dir:this.working_dir,result_ary:e})}else{if(!n.dir)return null;this.$refs.input.inputText=`${e[0]} ${n.dir}`}},execCommand(t){const e=t.split(" ").filter((t=>""!==t));if(0===e.length)return[null,null];switch(e[0]){case"help":{let t=0;this.commands.forEach((e=>{t=Math.max(t,e.name.length+e.args.length)}));let e="Command list\n";return this.commands.forEach((n=>{let r=n.name.length+n.args.length;e+=` * ${n.name} ${n.args}${" ".repeat(t-r+4)}:${n.desc}\n`})),e+="\nand some secret commands ...",[e,null]}case"cd":{let t=F(this.working_dir,e.splice(1));return void 0!=t["error"]?[t["error"],null]:(this.afterInputActions.push((function(e){e.working_dir=t.data})),[null,null])}case"ls":return R(this.working_dir,e.splice(1));case"cat":return U(this.working_dir,e.splice(1));case"history":return"-clear"===e[1]&&this.$refs.input.clearHistory(),J(e.splice(1));case"lang":return["set language : coming soon!",null];case"open":{let t=N(this.working_dir,e.splice(1));return t.error?[t.error,null]:t.msg?[t.msg,null]:(window.open(t.data),[`open: ${t.data}`,null])}case"editor":return["sorry... editor command was deleted.",null];case"share":return"-tw"===e[1]?(window.open("http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v"),['<a href="http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v" target="_blank">Share on Twitter</a>',"html"]):["<u>https://stonesaw.github.io/cli/</u>","html"];default:return[`Command '${e[0]}' is not found! Use 'help' to see the command list.`,null]}},textToHtml(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")}}});const z=(0,T.Z)(W,[["render",v],["__scopeId","data-v-bfd9ce3c"]]);var B=z,P=(0,i.aZ)({components:{CLI:B},setup(){const t=(0,l.iH)();function e(){t.value?.focus();let e=document.documentElement,n=e.scrollHeight-e.clientHeight;window.scroll(0,n)}return addEventListener("keydown",e),{cliRef:t}}});const Y=(0,T.Z)(P,[["render",o]]);var V=Y;(0,r.ri)(V).mount("#app")},7832:function(t){t.exports=JSON.parse('{"~":{"cli":{"README.md":["txt","# 🎈 [cli](https://stonesaw.github.io/cli)\\nhttps://stonesaw.github.io/cli  \\n[ 🔨 Building now ...]  \\nImplement the cli interface on the web  \\n\\n\\n## ✨ Features\\n```bash\\nstonesaaw.github.io> cd portfolio\\n                     # => Redirecting to portfolio/\\n\\nstonesaaw.github.io> ls\\n                     # => portfolio/\\n                     # => blog/\\n                     # => ...\\n```\\n"],"repo.link":["link","https://github.com/stonesaw/cli"],"src":{"assets":{"logo.png":["img"]}}}}}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,s){if(!r){var o=1/0;for(u=0;u<t.length;u++){r=t[u][0],i=t[u][1],s=t[u][2];for(var l=!0,a=0;a<r.length;a++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[a])}))?r.splice(a--,1):(l=!1,s<o&&(o=s));if(l){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[r,i,s]}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,s,o=r[0],l=r[1],a=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var u=a(n)}for(e&&e(r);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},r=self["webpackChunkcli"]=self["webpackChunkcli"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(5290)}));r=n.O(r)})();
//# sourceMappingURL=app.f2997f08.js.map
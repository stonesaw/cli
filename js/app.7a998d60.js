(function(t){function e(e){for(var r,o,l=e[0],c=e[1],a=e[2],h=0,d=[];h<l.length;h++)o=l[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,a||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var a=0;a<l.length;a++)e(l[a]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1c53":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("7a23");const i={id:"app"};function s(t,e,n,s,o,l){const c=Object(r["k"])("CLI");return Object(r["g"])(),Object(r["c"])("div",i,[Object(r["e"])(c,{ref:"cli"},null,512)])}const o=t=>(Object(r["i"])("data-v-b1ee8ee2"),t=t(),Object(r["h"])(),t),l={class:"cli-main"},c=o(()=>Object(r["d"])("span",{class:"cli-head"},"stonesaw.github.io ",-1)),a={class:"cli-dir"},u=o(()=>Object(r["d"])("span",{class:"cli-head"}," $ ",-1)),h={class:"cli-input-history"},d=["innerHTML"],p=o(()=>Object(r["d"])("span",{class:"cli-head"},"stonesaw.github.io ",-1)),_={class:"cli-dir"},f=o(()=>Object(r["d"])("span",{class:"cli-head"}," $ ",-1));function m(t,e,n,i,s,o){const m=Object(r["k"])("CLIStart"),g=Object(r["k"])("CLIInput");return Object(r["g"])(),Object(r["c"])("div",l,[Object(r["e"])(m),(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(t.histories,(t,e)=>(Object(r["g"])(),Object(r["c"])("div",{key:e,class:"cli-history"},[c,Object(r["d"])("span",a,Object(r["l"])(t.dir.join("/")),1),u,Object(r["d"])("span",h,Object(r["l"])(t.input),1),(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(t.result_ary,(t,e)=>(Object(r["g"])(),Object(r["c"])("div",{key:e},[Object(r["d"])("span",{class:"cli-result",innerHTML:t},null,8,d)]))),128))]))),128)),Object(r["d"])("div",null,[p,Object(r["d"])("span",_,Object(r["l"])(t.working_dir.join("/")),1),f,Object(r["e"])(g,{ref:"input",onExecCmd:t.inputEnter,onComplementDir:t.inputTab},null,8,["onExecCmd","onComplementDir"])])])}n("caad"),n("5b81");const g={class:"cli-start"},b=Object(r["d"])("div",null,[Object(r["d"])("div",null," _       __     __                             __           ________    ____   __"),Object(r["d"])("div",null,"| |     / /__  / /________  ____ ___  ___     / /_____     / ____/ /   /  _/  / /"),Object(r["d"])("div",null,"| | /| / / _ \\/ / ___/ __ \\/ __ `__ \\/ _ \\   / __/ __ \\   / /   / /    / /   / / "),Object(r["d"])("div",null,"| |/ |/ /  __/ / /__/ /_/ / / / / / /  __/  / /_/ /_/ /  / /___/ /____/ /   /_/  "),Object(r["d"])("div",null,"|__/|__/\\___/_/\\___/\\____/_/ /_/ /_/\\___/   \\__/\\____/   \\____/_____/___/  (_)   ")],-1),y=Object(r["d"])("div",null,"Welcome to cli",-1),j=[b,y];function O(t,e){return Object(r["g"])(),Object(r["c"])("div",g,j)}var v=n("6b0d"),w=n.n(v);const x={},I=w()(x,[["render",O]]);var k=I;function T(t,e,n,i,s,o){return Object(r["g"])(),Object(r["c"])("span",{class:"cli-input",onKeydown:[e[2]||(e[2]=Object(r["o"])((...e)=>t.pressKeyUp&&t.pressKeyUp(...e),["up"])),e[3]||(e[3]=Object(r["o"])((...e)=>t.pressKeyDown&&t.pressKeyDown(...e),["down"])),e[4]||(e[4]=Object(r["o"])((...e)=>t.pressKeyTab&&t.pressKeyTab(...e),["tab"]))]},[Object(r["n"])(Object(r["d"])("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=e=>t.inputText=e),type:"text",autofocus:"",maxlength:"50",onKeydown:e[1]||(e[1]=Object(r["o"])((...e)=>t.pressKeyEnter&&t.pressKeyEnter(...e),["enter"]))},null,544),[[r["m"],t.inputText]])],32)}var S=Object(r["f"])({emits:["exec-cmd","complement-dir"],data(){return{inputText:"",history:[],historyIndex:null,inputCurrent:""}},mounted(){this.loadHistory()},methods:{focus(){this.$refs.input.focus()},loadHistory(){if(localStorage.getItem("history"))try{this.history=JSON.parse(localStorage.getItem("history"))}catch(t){localStorage.removeItem("history")}},saveHistory(){const t=JSON.stringify(this.history);localStorage.setItem("history",t)},clearHistory(){this.history=[]},pressKeyEnter(){this.$emit("exec-cmd",this.inputText),""!==this.inputText&&this.history[this.history.length-1]!==this.inputText&&(this.history.push(this.inputText),this.historyIndex=null,this.saveHistory()),this.inputText="",this.inputCurrent=""},pressKeyTab(t){t.preventDefault(),this.$emit("complement-dir",this.inputText)},pressKeyUp(t){t.preventDefault(),this.history.length>0&&(null===this.historyIndex&&(this.historyIndex=this.history.length,this.inputCurrent=this.inputText),this.historyIndex=Math.max(this.historyIndex-1,0),this.inputText=this.history[this.historyIndex])},pressKeyDown(t){t.preventDefault(),this.history.length>0&&null!==this.historyIndex&&(this.historyIndex===this.history.length-1?(this.historyIndex=null,this.inputText=this.inputCurrent):(this.historyIndex=Math.min(this.historyIndex+1,this.history.length-1),this.inputText=this.history[this.historyIndex]))}}});n("fa04");const $=w()(S,[["render",T],["__scopeId","data-v-147e56d2"]]);var C=$;function E(t,e){var n=Object.prototype.toString.call(e).slice(8,-1);return void 0!==e&&null!==e&&n===t}function A(t){return E("Object",t)}function K(t){return null!=t&&void 0!=t&&t!==[]&&t!=={}}var H=n("cf0e");function D(t,e="./"){let n=e.split("/").filter(t=>""!==t&&"."!==t),r="~"===n[0]?n:t.concat(n),i=H,s=[],o=[];for(let c=0;c<r.length;c++){const t=r[c];if(".."===t)o.length<=0||(i=s[s.length-1]||H,s.pop(),o.pop());else{if(void 0==i[t])return{error:"そのようなファイルやディレクトリはありません",dir_name:o,files_list:i};s.push(i),o.push(t),i=i[t]}}"~"!==o[0]&&(o.unshift("~"),i=i["~"]);let l=A(i)?"dir":i;return"dir"===l?{dir_name:o,type:l,files_list:i}:{dir_name:o,type:i[0],content:i[1]}}function L(t,e="./"){let n=e.split("/").filter(t=>""!==t&&"."!==t);const r=D(t,e);if("dir"===r.type||r.error){let t;if(t="dir"===r.type?Object.keys(r.files_list):Object.keys(r.files_list).filter(t=>RegExp(`^${n[n.length-1]||""}.*`).test(t)),0===t.length)return{dir:null};if(1===t.length){let e;return e="dir"===r.type?n.join("/")+"/"+t[0]:1===n.length?t[0]:n.splice(0,n.length-1).join("/")+"/"+t[0],{dir:e}}{var i="";const e=[];return t.forEach(t=>e.push([t,r.files_list[t]])),e.forEach(t=>{i=A(t[1])?i.concat(t[0],"/   "):i.concat(t[0],"    ")}),{dirs:i}}}return null}function M(t,e){const n=D(t,e[0]||"~");return void 0!=n.error?{error:n["error"]}:"dir"!==n.type?{error:e[0]+": ディレクトリではありません"}:{msg:`debug: cd (${t.join("/")} -> ${n.dir_name.join("/")})`,data:n.dir_name}}function P(t,e){const n=D(t,e[0]);if(void 0!=n.error)return[n.error,null];if("dir"!==n.type)return[e[0]+": ディレクトリではありません",null];var r="";for(const[i,s]of Object.entries(n.files_list))r=A(s)?r.concat(i,"/   "):r.concat(i,"    ");return[r,null]}function J(t,e){if(!K(e[0])||"-h"===e[0]||"--help"===e[0])return["cat help",null];const n=D(t,e[0]);return void 0!=n.error?[n.error,null]:"txt"!==n.type?[e[0]+": テキストファイルではありません",null]:[n.content,null]}function U(t){if(t.includes("-clear"))return localStorage.removeItem("history"),["clear history",null];var e=[];if(!localStorage.getItem("history"))return["no history",null];try{e=JSON.parse(localStorage.getItem("history"))}catch(i){localStorage.removeItem("history")}var n=Math.log10(e.length)+1,r="";return e.forEach((t,e)=>{r+=` ${e.toString().padStart(n," ")}  ${t}\n`}),[r.replace(/\n$/,""),null]}function F(t,e){if(!K(e[0])||"-h"===e[0]||"--help"===e[0])return{msg:"open help"};const n=D(t,e[0]);return void 0!=n.error?{error:n.error}:"link"!==n.type?{error:e[0]+": リンクではありません"}:{data:n.content}}var N=Object(r["f"])({name:"CLI",components:{CLIStart:k,CLIInput:C},data(){return{inputText:"",working_dir:["~","cli"],histories:[],commands:[{name:"cd",args:"[dir]",desc:"change directory."},{name:"ls",args:"[dir]",desc:"list segments."},{name:"cat",args:"[file]",desc:"show txt file content."},{name:"history",args:"[-clear]",desc:"command history."},{name:"lang",args:"[en|ja]",desc:"change language."},{name:"open",args:"[link_file]",desc:"open link file."},{name:"editor",args:"[-close|-C]",desc:"open editor."},{name:"share",args:"[-tw]",desc:"share sns."}],afterInputActions:[]}},methods:{focus(){this.$refs.input.focus()},inputEnter(t){const e=this.execCommand(t);var n;null===e[0]?n=null:"html"===e[1]?n=e[0].split("\n"):(n=this.textToHtml(e[0]).split("\n"),n=n.map(t=>""===t?"&nbsp;":t)),this.histories.push({input:t,dir:this.working_dir,result_ary:n}),this.afterInputActions.forEach(t=>{t(this)}),this.afterInputActions=[]},inputTab(t){const e=t.split(" ").filter(t=>""!==t);if(0===e.length||!["cd","ls"].includes(e[0]))return null;const n=L(this.working_dir,e[1]);if(n.dirs){let e=this.textToHtml(n.dirs).split("\n");e=e.map(t=>""===t?"&nbsp;":t),this.histories.push({input:t,dir:this.working_dir,result_ary:e})}else{if(!n.dir)return null;this.$refs.input.inputText=`${e[0]} ${n.dir}`}},execCommand(t){const e=t.split(" ").filter(t=>""!==t);if(0===e.length)return[null,null];switch(e[0]){case"help":{let t=0;this.commands.forEach(e=>{t=Math.max(t,e.name.length+e.args.length)});let e="Command list\n";return this.commands.forEach(n=>{let r=n.name.length+n.args.length;e+=` * ${n.name} ${n.args}${" ".repeat(t-r+4)}:${n.desc}\n`}),e+="\nand some secret commands ...",[e,null]}case"cd":{let t=M(this.working_dir,e.splice(1));return void 0!=t["error"]?[t["error"],null]:(this.afterInputActions.push((function(e){e.working_dir=t.data})),[null,null])}case"ls":return P(this.working_dir,e.splice(1));case"cat":return J(this.working_dir,e.splice(1));case"history":return"-clear"===e[1]&&this.$refs.input.clearHistory(),U(e.splice(1));case"lang":return["set language : coming soon!",null];case"open":{let t=F(this.working_dir,e.splice(1));return t.error?[t.error,null]:t.msg?[t.msg,null]:(window.open(t.data),["open: "+t.data,null])}case"editor":return["sorry... editor command was deleted.",null];case"share":return"-tw"===e[1]?(window.open("http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v"),['<a href="http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v" target="_blank">Share on Twitter</a>',"html"]):["<u>https://stonesaw.github.io/cli/</u>","html"];default:return[`Command '${e[0]}' is not found! Use 'help' to see the command list.`,null]}},textToHtml(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")}}});n("d658");const B=w()(N,[["render",m],["__scopeId","data-v-b1ee8ee2"]]);var R=B,V=Object(r["f"])({name:"App",components:{CLI:R},mounted(){document.addEventListener("keydown",this.onKeyDown)},beforeUnmount(){document.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown(){this.$refs.cli.focus();let t=document.documentElement,e=t.scrollHeight-t.clientHeight;window.scroll(0,e)}}});n("5eea");const W=w()(V,[["render",s]]);var q=W;Object(r["b"])(q).mount("#app")},"5eea":function(t,e,n){"use strict";n("f12a")},a8b8:function(t,e,n){},cf0e:function(t){t.exports=JSON.parse('{"~":{"cli":{"README.md":["txt","# 🎈 [cli](https://stonesaw.github.io/cli)\\nhttps://stonesaw.github.io/cli  \\n[ 🔨 Building now ...]  \\nImplement the cli interface on the web  \\n\\n\\n## ✨ Features\\n```bash\\nstonesaaw.github.io> cd portfolio\\n                     # => Redirecting to portfolio/\\n\\nstonesaaw.github.io> ls\\n                     # => portfolio/\\n                     # => blog/\\n                     # => ...\\n```\\n"],"repo.link":["link","https://github.com/stonesaw/cli"],"src":{"assets":{"logo.png":["img"]}}}}}')},d658:function(t,e,n){"use strict";n("a8b8")},f12a:function(t,e,n){},fa04:function(t,e,n){"use strict";n("1c53")}});
//# sourceMappingURL=app.7a998d60.js.map
(function(){"use strict";var t={912:function(t,e,n){var r=n(9242),i=n(3396);const s={id:"app"};function o(t,e,n,r,o,l){const a=(0,i.up)("CLI");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(a,{ref:"cli"},null,512)])}var l=n(7139);const a=t=>((0,i.dD)("data-v-b836afca"),t=t(),(0,i.Cn)(),t),c={class:"cli-main"},u=a((()=>(0,i._)("span",{class:"cli-head"},"stonesaw.github.io ",-1))),h={class:"cli-dir"},_=a((()=>(0,i._)("span",{class:"cli-head"}," $ ",-1))),p={class:"cli-input-history"},d=["innerHTML"],f=a((()=>(0,i._)("span",{class:"cli-head"},"stonesaw.github.io ",-1))),m={class:"cli-dir"},g=a((()=>(0,i._)("span",{class:"cli-head"}," $ ",-1)));function y(t,e,n,r,s,o){const a=(0,i.up)("CLIStart"),y=(0,i.up)("CLIInput");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(a),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.histories,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"cli-history"},[u,(0,i._)("span",h,(0,l.zw)(t.dir.join("/")),1),_,(0,i._)("span",p,(0,l.zw)(t.input),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.result_ary,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i._)("span",{class:"cli-result",innerHTML:t},null,8,d)])))),128))])))),128)),(0,i._)("div",null,[f,(0,i._)("span",m,(0,l.zw)(t.working_dir.join("/")),1),g,(0,i.Wm)(y,{ref:"input",onExecCmd:t.inputEnter,onComplementDir:t.inputTab},null,8,["onExecCmd","onComplementDir"])])])}n(6699);const w={class:"cli-start"},v=(0,i._)("div",null,[(0,i._)("div",null," _       __     __                             __           ________    ____   __"),(0,i._)("div",null,"| |     / /__  / /________  ____ ___  ___     / /_____     / ____/ /   /  _/  / /"),(0,i._)("div",null,"| | /| / / _ \\/ / ___/ __ \\/ __ `__ \\/ _ \\   / __/ __ \\   / /   / /    / /   / / "),(0,i._)("div",null,"| |/ |/ /  __/ / /__/ /_/ / / / / / /  __/  / /_/ /_/ /  / /___/ /____/ /   /_/  "),(0,i._)("div",null,"|__/|__/\\___/_/\\___/\\____/_/ /_/ /_/\\___/   \\__/\\____/   \\____/_____/___/  (_)   ")],-1),x=(0,i._)("div",null,"Welcome to cli",-1),b=[v,x];function $(t,e){return(0,i.wg)(),(0,i.iD)("div",w,b)}var D=n(89);const k={},I=(0,D.Z)(k,[["render",$]]);var A=I;function T(t,e,n,s,o,l){return(0,i.wg)(),(0,i.iD)("span",{class:"cli-input",onKeydown:[e[2]||(e[2]=(0,r.D2)(((...e)=>t.pressKeyUp&&t.pressKeyUp(...e)),["up"])),e[3]||(e[3]=(0,r.D2)(((...e)=>t.pressKeyDown&&t.pressKeyDown(...e)),["down"])),e[4]||(e[4]=(0,r.D2)(((...e)=>t.pressKeyTab&&t.pressKeyTab(...e)),["tab"]))]},[(0,i.wy)((0,i._)("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=e=>t.inputText=e),type:"text",autofocus:"",maxlength:"50",onKeydown:e[1]||(e[1]=(0,r.D2)(((...e)=>t.pressKeyEnter&&t.pressKeyEnter(...e)),["enter"]))},null,544),[[r.nr,t.inputText]])],32)}var E=(0,i.aZ)({emits:["exec-cmd","complement-dir"],data(){return{inputText:"",history:[],historyIndex:null,inputCurrent:""}},mounted(){this.loadHistory()},methods:{refs(){return this.$refs},focus(){this.refs().input.focus()},loadHistory(){if(localStorage.getItem("history"))try{this.history=JSON.parse(localStorage.getItem("history"))}catch(t){localStorage.removeItem("history")}},saveHistory(){const t=JSON.stringify(this.history);localStorage.setItem("history",t)},clearHistory(){this.history=[]},pressKeyEnter(){this.$emit("exec-cmd",this.inputText),""!==this.inputText&&this.history[this.history.length-1]!==this.inputText&&(this.history.push(this.inputText),this.historyIndex=null,this.saveHistory()),this.inputText="",this.inputCurrent=""},pressKeyTab(t){t.preventDefault(),this.$emit("complement-dir",this.inputText)},pressKeyUp(t){t.preventDefault(),this.history.length>0&&(null===this.historyIndex&&(this.historyIndex=this.history.length,this.inputCurrent=this.inputText),this.historyIndex=Math.max(this.historyIndex-1,0),this.inputText=this.history[this.historyIndex])},pressKeyDown(t){t.preventDefault(),this.history.length>0&&null!==this.historyIndex&&(this.historyIndex===this.history.length-1?(this.historyIndex=null,this.inputText=this.inputCurrent):(this.historyIndex=Math.min(this.historyIndex+1,this.history.length-1),this.inputText=this.history[this.historyIndex]))}}});const C=(0,D.Z)(E,[["render",T],["__scopeId","data-v-38317d10"]]);var S=C;function O(t){return null!==t&&void 0!==t||Array.isArray(t)&&K(t)}function K(t){return!(t.length>0)}function j(t,e){const n=Object.prototype.toString.call(e).slice(8,-1);return void 0!==e&&null!==e&&n===t}function H(t){return j("Object",t)}var L=n(2482);n(1703);const M=n(790),N=n(8566),Z={en:M,ja:N};class F{static isAllowedLocale(t){return"en"===t||"ja"===t}static setLocale(t){if(!this.isAllowedLocale(t))throw new Error(`don't know locale '${t}'`);this.locale=t}static t(t,e){let n=this._searchMessage(t);Array.isArray(n)&&(n=n.join("\n"));for(const[r,i]of Object.entries(e||{})){if(!RegExp(`{${r}}`).test(n))throw new Error(`i18n.t() unknown format '${r}'\n  local: ${this.locale}`);n=n.replace(`{${r}}`,i||"")}return n}static _searchMessage(t){if(this.locale in Z){const e=Z[this.locale],n=t.split(".").filter((t=>""!==t));let r=e;for(let i=0;i<n.length;i++){const e=r[n[i]];if("string"===typeof e||Array.isArray(e)){if(i<n.length-1)throw new Error(`i18n.t() key '${t}' at '${n[i+1]}' is not found!.\n  local: ${this.locale}`);return e}r=e}throw new Error(`i18n.t() key '${t}' is not found!\n  local: ${this.locale}`)}throw new Error(`i18n.t() local '${this.locale}' is not found!`)}}(0,L.Z)(F,"locale","en");var J=F;const U=n(7832);function R(t){return void 0!==t.childDir}function W(t){return void 0!==t?.content}function z(t,e){for(const[n,r]of Object.entries(t))if(Array.isArray(r)){let t={path:`${e.path}/${n}`,name:n,type:r[0],content:r[1]||"",parentDir:e};e.childDir.push(t)}else{if(!H(r))throw`can't generate directory ( key:${n}, value:${r} )`;{let r={path:`${e.path}/${n}`,name:n,childDir:[],parentDir:e};e.childDir.push(r),z(t[`${n}`],r)}}}let B={path:"~",name:"~",childDir:[],parentDir:null};function P(t){let e="";for(let n=0;n<t.length;n++){const r=t[n];R(r)?e+=`${r.name}/   `:e+=`${r.name}    `}return e}function Y(t,e=/.*/){return t.childDir.filter((t=>e.test(t.name)))}function V(t,e){const n=e.split("/").filter((t=>""!==t&&"."!==t));return"~"===n[0]?n:t.concat(n)}function q(t,e="./"){const n=V(t,e);"~"===n[0]&&n.shift();let r=B;for(let i=0;i<n.length;i++){const t=n[i];if(W(r))return{error:J.t("errors.no_such_dirs"),info:r};if("."===t);else if(".."===t)null===r.parentDir||(r=r.parentDir);else{let e=!1;for(let n=0;n<r.childDir.length;n++)if(r.childDir[n].name===t){r=r.childDir[n],e=!0;break}if(!e)return{error:J.t("errors.no_such_dirs"),info:r}}}return r}function G(t,e="./"){const n=e.split("/").filter((t=>""!==t&&"."!==t)),r=q(t,e);if(!W(r)){let t;switch(t=R(r)?r.childDir:R(r.info)?Y(r.info,RegExp(`^${n[n.length-1]||""}.*`)):[],t.length){case 0:return null;case 1:let e;return R(r)?e=n.concat([t[0].name]).join("/"):(n[n.length-1]=t[0].name,e=n.join("/")),{dir:e+(R(t[0])?"/":"")};default:return P(t)}}return null}function Q(t,e){const n=q(t,e[0]||"~");return W(n)?{error:J.t("errors.is_not_dir",{dir_name:e[0]})}:R(n)?{dir:n.path.split("/")}:{error:n.error}}function X(t,e){const n=q(t,e[0]);return W(n)?[J.t("errors.is_not_dir",{dir_name:e[0]}),null]:R(n)?[P(n.childDir),null]:[n.error,null]}function tt(t,e){if(!O(e[0])||"-h"===e[0]||"--help"===e[0])return["cat help",null];const n=q(t,e[0]);return R(n)||W(n)?R(n)||"txt"!==n.type?[J.t("errors.is_not_text",{dir_name:e[0]}),null]:[n.content,null]:[n.error,null]}function et(t){if(t.includes("-clear"))return localStorage.removeItem("history"),[J.t("messages.clear_history"),null];let e=[];if(!localStorage.getItem("history"))return[J.t("messages.no_history"),null];try{e=JSON.parse(localStorage.getItem("history"))}catch(i){localStorage.removeItem("history")}const n=Math.log10(e.length)+1;let r="";return e.forEach(((t,e)=>{r+=` ${e.toString().padStart(n," ")}  ${t}\n`})),[r.replace(/\n$/,""),null]}function nt(t,e){if(!O(e[0])||"-h"===e[0]||"--help"===e[0])return{msg:"open help"};const n=q(t,e[0]);return R(n)||W(n)?R(n)||"link"!==n.type?{error:J.t("errors.is_not_link",{dir_name:e[0]})}:{data:n.content}:{error:n.error}}z(U["~"],B);var rt=(0,i.aZ)({name:"CLI",components:{CLIStart:A,CLIInput:S},data(){return{working_dir:["~","cli"],histories:[],commands:[{name:"cd",args:"[dir]"},{name:"ls",args:"[dir]"},{name:"cat",args:"[file]"},{name:"history",args:"[-clear]"},{name:"lang",args:"[en|ja]"},{name:"open",args:"[link_file]"},{name:"share",args:"[-tw]"}],afterInputActions:[]}},methods:{refs(){return this.$refs},focus(){this.refs().input.focus()},inputEnter(t){const e=this.execCommand(t);var n;null===e[0]?n=[""]:"html"===e[1]?n=e[0].split("\n"):(n=this.textToHtml(e[0]).split("\n"),n=n.map((t=>""===t?"&nbsp;":t))),this.histories.push({input:t,dir:this.working_dir,result_ary:n}),this.afterInputActions.forEach((t=>{t(this)})),this.afterInputActions=[]},inputTab(t){const e=t.split(" ").filter((t=>""!==t));if(0===e.length||!["cd","ls"].includes(e[0]))return null;const n=G(this.working_dir,e[1]);if("string"===typeof n){let e=this.textToHtml(n).split("\n");this.histories.push({input:t,dir:this.working_dir,result_ary:e})}else{if(!n?.dir)return null;this.refs().input.inputText=`${e[0]} ${n.dir}`}},execCommand(t){const e=t.split(" ").filter((t=>""!==t));if(0===e.length)return[null,null];switch(e[0]){case"help":{let t=0,e="Command list\n";return this.commands.forEach((e=>{t=Math.max(t,e.name.length+e.args.length)})),this.commands.forEach((n=>{let r=n.name.length+n.args.length;e+=` * ${n.name} ${n.args}${" ".repeat(t-r+4)}:${J.t(`help.summary.${n.name}`)}\n`})),[e.trim(),null]}case"cd":{let t=Q(this.working_dir,e.splice(1));return void 0==t.error&&this.afterInputActions.push((function(e){e.working_dir=t.dir})),[t.error||null,null]}case"ls":return X(this.working_dir,e.splice(1));case"cat":return tt(this.working_dir,e.splice(1));case"history":return"-clear"===e[1]&&this.refs().input.clearHistory(),et(e.splice(1));case"lang":if(!e[1]||""===e[1])return[`current lang is ${J.locale}`,null];try{return J.setLocale(e[1]),[`lang: set language '${e[1]}'`,null]}catch(n){return[`lang: can't set language '${e[1]}'`,null]}case"open":{let t=nt(this.working_dir,e.splice(1));return t.error?[t.error,null]:t.msg?[t.msg,null]:(window.open(t.data),[`open: ${t.data}`,null])}case"share":return"-tw"===e[1]?(window.open("http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v"),['<a href="http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v" target="_blank">Share on Twitter</a>',"html"]):["<u>https://stonesaw.github.io/cli/</u>","html"];default:return[`Command '${e[0]}' is not found! Use 'help' to see the command list.`,null]}},textToHtml(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")}}});const it=(0,D.Z)(rt,[["render",y],["__scopeId","data-v-b836afca"]]);var st=it,ot=(0,i.aZ)({components:{CLI:st},mounted(){document.addEventListener("keydown",this.onKeyDown)},onUnmounted(){document.removeEventListener("keydown",this.onKeyDown)},methods:{refs(){return this.$refs},onKeyDown(){this.refs().cli.focus();let t=document.documentElement,e=t.scrollHeight-t.clientHeight;window.scroll(0,e)}}});const lt=(0,D.Z)(ot,[["render",o]]);var at=lt;(0,r.ri)(at).mount("#app")},7832:function(t){t.exports=JSON.parse('{"~":{"cli":{"README.md":["txt","# 🎈 [cli](https://stonesaw.github.io/cli)\\nhttps://stonesaw.github.io/cli  \\n[ 🔨 Building now ...]  \\nImplement the cli interface on the web  \\n\\n\\n## ✨ Features\\n```bash\\nstonesaaw.github.io> cd portfolio\\n                     # => Redirecting to portfolio/\\n\\nstonesaaw.github.io> ls\\n                     # => portfolio/\\n                     # => blog/\\n                     # => ...\\n```\\n"],"repo.link":["link","https://github.com/stonesaw/cli"],"src":{"assets":{"logo.png":["img"]}}}}}')},790:function(t){t.exports=JSON.parse('{"test":{"hello":"hello world","format":"Hi, {name}!","multiline":["multiline with array","line: {one}","line: {two}"]},"help":{"summary":{"cd":"change directory.","ls":"list segments.","cat":"show txt file content.","history":"command history.","lang":"change language.","open":"open link file.","share":"share sns."}},"messages":{"clear_history":"cleared history","no_history":"no history"},"errors":{"is_not_dir":"\\"{dir_name}\\" is not directory","is_not_link":"\\"{dir_name}\\" is not link","is_not_text":"\\"{dir_name}\\" is not text","no_such_dirs":"No such directory or file"}}')},8566:function(t){t.exports=JSON.parse('{"test":{"hello":"こんにちは、世界","format":"こんにちは！{name}！","multiline":["配列を使うと複数行の文字を表示できます","{one}行目","{two}行目"]},"help":{"summary":{"cd":"ディレクトリを移動します。","ls":"ファイルをリスト表示します。","cat":"テキストファイルの内容を表示します。","history":"コマンドの履歴を表示します。","lang":"言語を変更します。","open":"リンクファイルを開きます。","share":"SNSでシェアします。"}},"messages":{"clear_history":"履歴を削除しました","no_history":"履歴がありません"},"errors":{"is_not_dir":"\\"{dir_name}\\" は ディレクトリではありません","is_not_link":"\\"{dir_name}\\" は リンクではありません","is_not_text":"\\"{dir_name}\\" は テキストファイルではありません","no_such_dirs":"そのようなディレクトリやファイルはありません"}}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,s){if(!r){var o=1/0;for(u=0;u<t.length;u++){r=t[u][0],i=t[u][1],s=t[u][2];for(var l=!0,a=0;a<r.length;a++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[a])}))?r.splice(a--,1):(l=!1,s<o&&(o=s));if(l){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[r,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,s,o=r[0],l=r[1],a=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var u=a(n)}for(e&&e(r);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},r=self["webpackChunkcli"]=self["webpackChunkcli"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(912)}));r=n.O(r)})();
//# sourceMappingURL=app.19548f57.js.map
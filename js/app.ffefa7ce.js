(function(){"use strict";var t={198:function(t,e,n){var r=n(9242),i=n(3396);const s={id:"app"};function o(t,e,n,r,o,l){const a=(0,i.up)("CLI");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(a,{ref:"cli"},null,512)])}var l=n(7139);const a=t=>((0,i.dD)("data-v-485bf41c"),t=t(),(0,i.Cn)(),t),u={class:"cli-main"},c=a((()=>(0,i._)("span",{class:"cli-head"},"stonesaw.github.io ",-1))),h={class:"cli-dir"},p=a((()=>(0,i._)("span",{class:"cli-head"}," $ ",-1))),d={class:"cli-input-history"},_=["innerHTML"],f=a((()=>(0,i._)("span",{class:"cli-head"},"stonesaw.github.io ",-1))),m={class:"cli-dir"},g=a((()=>(0,i._)("span",{class:"cli-head"}," $ ",-1)));function y(t,e,n,r,s,o){const a=(0,i.up)("CLIStart"),y=(0,i.up)("CLIInput");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(a),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.histories,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"cli-history"},[c,(0,i._)("span",h,(0,l.zw)(t.dir.join("/")),1),p,(0,i._)("span",d,(0,l.zw)(t.input),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.result_ary,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i._)("span",{class:"cli-result",innerHTML:t},null,8,_)])))),128))])))),128)),(0,i._)("div",null,[f,(0,i._)("span",m,(0,l.zw)(t.working_dir.join("/")),1),g,(0,i.Wm)(y,{ref:"input",onExecCmd:t.inputEnter,onComplementDir:t.inputTab},null,8,["onExecCmd","onComplementDir"])])])}n(6699);const w={class:"cli-start"},v=(0,i._)("div",null,[(0,i._)("div",null," _       __     __                             __           ________    ____   __"),(0,i._)("div",null,"| |     / /__  / /________  ____ ___  ___     / /_____     / ____/ /   /  _/  / /"),(0,i._)("div",null,"| | /| / / _ \\/ / ___/ __ \\/ __ `__ \\/ _ \\   / __/ __ \\   / /   / /    / /   / / "),(0,i._)("div",null,"| |/ |/ /  __/ / /__/ /_/ / / / / / /  __/  / /_/ /_/ /  / /___/ /____/ /   /_/  "),(0,i._)("div",null,"|__/|__/\\___/_/\\___/\\____/_/ /_/ /_/\\___/   \\__/\\____/   \\____/_____/___/  (_)   ")],-1),x=(0,i._)("div",null,"Welcome to cli",-1),b=[v,x];function D(t,e){return(0,i.wg)(),(0,i.iD)("div",w,b)}var I=n(89);const $={},k=(0,I.Z)($,[["render",D]]);var T=k;function C(t,e,n,s,o,l){return(0,i.wg)(),(0,i.iD)("span",{class:"cli-input",onKeydown:[e[2]||(e[2]=(0,r.D2)(((...e)=>t.pressKeyUp&&t.pressKeyUp(...e)),["up"])),e[3]||(e[3]=(0,r.D2)(((...e)=>t.pressKeyDown&&t.pressKeyDown(...e)),["down"])),e[4]||(e[4]=(0,r.D2)(((...e)=>t.pressKeyTab&&t.pressKeyTab(...e)),["tab"]))]},[(0,i.wy)((0,i._)("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=e=>t.inputText=e),type:"text",autofocus:"",maxlength:"50",onKeydown:e[1]||(e[1]=(0,r.D2)(((...e)=>t.pressKeyEnter&&t.pressKeyEnter(...e)),["enter"]))},null,544),[[r.nr,t.inputText]])],32)}var A=(0,i.aZ)({emits:["exec-cmd","complement-dir"],data(){return{inputText:"",history:[],historyIndex:null,inputCurrent:""}},mounted(){this.loadHistory()},methods:{refs(){return this.$refs},focus(){this.refs().input.focus()},loadHistory(){if(localStorage.getItem("history"))try{this.history=JSON.parse(localStorage.getItem("history"))}catch(t){localStorage.removeItem("history")}},saveHistory(){const t=JSON.stringify(this.history);localStorage.setItem("history",t)},clearHistory(){this.history=[]},pressKeyEnter(){this.$emit("exec-cmd",this.inputText),""!==this.inputText&&this.history[this.history.length-1]!==this.inputText&&(this.history.push(this.inputText),this.historyIndex=null,this.saveHistory()),this.inputText="",this.inputCurrent=""},pressKeyTab(t){t.preventDefault(),this.$emit("complement-dir",this.inputText)},pressKeyUp(t){t.preventDefault(),this.history.length>0&&(null===this.historyIndex&&(this.historyIndex=this.history.length,this.inputCurrent=this.inputText),this.historyIndex=Math.max(this.historyIndex-1,0),this.inputText=this.history[this.historyIndex])},pressKeyDown(t){t.preventDefault(),this.history.length>0&&null!==this.historyIndex&&(this.historyIndex===this.history.length-1?(this.historyIndex=null,this.inputText=this.inputCurrent):(this.historyIndex=Math.min(this.historyIndex+1,this.history.length-1),this.inputText=this.history[this.historyIndex]))}}});const O=(0,I.Z)(A,[["render",C],["__scopeId","data-v-e3680636"]]);var S=O;function K(t){return null!==t&&void 0!==t||Array.isArray(t)&&E(t)}function E(t){return!(t.length>0)}function H(t,e){const n=Object.prototype.toString.call(e).slice(8,-1);return void 0!==e&&null!==e&&n===t}function j(t){return H("Object",t)}const L=n(7832);function M(t){return void 0!==t.childDir}function Z(t){return void 0!==t.content}function F(t,e){for(const[n,r]of Object.entries(t))if(Array.isArray(r)){let t={path:`${e.path}/${n}`,name:n,type:r[0],content:r[1],parentDir:e};e.childDir.push(t)}else{if(!j(r))throw`can't generate directory ( key:${n}, value:${r} )`;{let r={path:`${e.path}/${n}`,name:n,childDir:[],parentDir:e};e.childDir.push(r),F(t[`${n}`],r)}}}let J={path:"~",name:"~",childDir:[],parentDir:null};function N(t){let e="";for(let n=0;n<t.length;n++){const r=t[n];M(r)?e+=`${r}/   `:e+=`${r}    `}return e}function U(t,e=/.*/){return t.childDir.filter((t=>e.test(t.name)))}function W(t,e){const n=e.split("/").filter((t=>""!==t&&"."!==t));return"~"===n[0]?n:t.concat(n)}function z(t,e="./"){const n=W(t,e);let r=JSON.parse(JSON.stringify(J));for(let i=0;i<n.length;i++){const t=n[i];if(Z(r))return{error:"ディレクトリではありません",info:r};if("."===t);else{if(".."!==t){for(let e=0;e<r.childDir.length;e++)if(r.childDir[e].name===t){r=r.childDir[e];break}return{error:"そのようなファイルやディレクトリはありません",info:r}}null===r.parentDir||(r=r.parentDir)}}return r}function B(t,e="./"){const n=e.split("/").filter((t=>""!==t&&"."!==t)),r=z(t,e);if(!Z(r)){let t;switch(t=M(r)?r.childDir:M(r.info)?U(r.info,RegExp(`^${n[n.length-1]||""}.*`)):[],t.length){case 0:return null;case 1:let e;return e=M(r)?n.join("/")+"/"+t[0].name:1===n.length?t[0].name:n.splice(0,n.length-1).join("/")+"/"+t[0],{dir:e};default:return N(t)}}return null}function R(t,e){const n=z(t,e[0]||"~");return Z(n)?{error:`${e[0]}: ディレクトリではありません`}:M(n)?{data:n.name}:{error:n.error}}function P(t,e){const n=z(t,e[0]);return Z(n)?[`${e[0]}: ディレクトリではありません`,null]:M(n)?[N(n.childDir),null]:[n.error,null]}function Y(t,e){if(!K(e[0])||"-h"===e[0]||"--help"===e[0])return["cat help",null];const n=z(t,e[0]);return M(n)||Z(n)?M(n)||"txt"!==n.type?[`${e[0]}: テキストファイルではありません`,null]:[n.content,null]:[n.error,null]}function V(t){if(t.includes("-clear"))return localStorage.removeItem("history"),["clear history",null];let e=[];if(!localStorage.getItem("history"))return["no history",null];try{e=JSON.parse(localStorage.getItem("history"))}catch(i){localStorage.removeItem("history")}const n=Math.log10(e.length)+1;let r="";return e.forEach(((t,e)=>{r+=` ${e.toString().padStart(n," ")}  ${t}\n`})),[r.replace(/\n$/,""),null]}function q(t,e){if(!K(e[0])||"-h"===e[0]||"--help"===e[0])return{msg:"open help"};const n=z(t,e[0]);return M(n)||Z(n)?M(n)||"link"!==n.type?{error:`${e[0]}: リンクではありません`}:{data:n.content}:{error:n.error}}F(L["~"],J);var G=(0,i.aZ)({name:"CLI",components:{CLIStart:T,CLIInput:S},data(){return{inputText:"",working_dir:["~","cli"],histories:[],commands:[{name:"cd",args:"[dir]",desc:"change directory."},{name:"ls",args:"[dir]",desc:"list segments."},{name:"cat",args:"[file]",desc:"show txt file content."},{name:"history",args:"[-clear]",desc:"command history."},{name:"lang",args:"[en|ja]",desc:"change language."},{name:"open",args:"[link_file]",desc:"open link file."},{name:"share",args:"[-tw]",desc:"share sns."}],afterInputActions:[]}},methods:{refs(){return this.$refs},focus(){this.refs().input.focus()},inputEnter(t){const e=this.execCommand(t);var n;null===e[0]?n=null:"html"===e[1]?n=e[0].split("\n"):(n=this.textToHtml(e[0]).split("\n"),n=n.map((t=>""===t?"&nbsp;":t))),this.histories.push({input:t,dir:this.working_dir,result_ary:n}),this.afterInputActions.forEach((t=>{t(this)})),this.afterInputActions=[]},inputTab(t){const e=t.split(" ").filter((t=>""!==t));if(0===e.length||!["cd","ls"].includes(e[0]))return null;const n=B(this.working_dir,e[1]);if("string"===typeof n){let e=this.textToHtml(n).split("\n");e=e.map((t=>""===t?"&nbsp;":t)),this.histories.push({input:t,dir:this.working_dir,result_ary:e})}else{if(!n?.dir)return null;this.refs().input.inputText=`${e[0]} ${n.dir}`}},execCommand(t){const e=t.split(" ").filter((t=>""!==t));if(0===e.length)return[null,null];switch(e[0]){case"help":{let t=0,e="Command list\n";return this.commands.forEach((e=>{t=Math.max(t,e.name.length+e.args.length)})),this.commands.forEach((n=>{let r=n.name.length+n.args.length;e+=` * ${n.name} ${n.args}${" ".repeat(t-r+4)}:${n.desc}\n`})),e+="\nand some secret commands ...",[e,null]}case"cd":{let t=R(this.working_dir,e.splice(1));return void 0!=t["error"]?[t["error"],null]:(this.afterInputActions.push((function(e){e.working_dir=t.data})),[null,null])}case"ls":return P(this.working_dir,e.splice(1));case"cat":return Y(this.working_dir,e.splice(1));case"history":return"-clear"===e[1]&&this.refs().input.clearHistory(),V(e.splice(1));case"lang":return["set language : coming soon!",null];case"open":{let t=q(this.working_dir,e.splice(1));return t.error?[t.error,null]:t.msg?[t.msg,null]:(window.open(t.data),[`open: ${t.data}`,null])}case"editor":return["sorry... editor command was deleted.",null];case"share":return"-tw"===e[1]?(window.open("http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v"),['<a href="http://twitter.com/share?text=%F0%9F%AB%A1%20Hello,%20web-cli%0Acheck%20it%20...%20&url=https://stonesaw.github.io/cli/%0A&hashtags=indiedev,webdev,opensource&related=sou_0x0v" target="_blank">Share on Twitter</a>',"html"]):["<u>https://stonesaw.github.io/cli/</u>","html"];default:return[`Command '${e[0]}' is not found! Use 'help' to see the command list.`,null]}},textToHtml(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")}}});const Q=(0,I.Z)(G,[["render",y],["__scopeId","data-v-485bf41c"]]);var X=Q,tt=(0,i.aZ)({components:{CLI:X},mounted(){document.addEventListener("keydown",this.onKeyDown)},onUnmounted(){document.removeEventListener("keydown",this.onKeyDown)},methods:{refs(){return this.$refs},onKeyDown(){this.refs().cli.focus();let t=document.documentElement,e=t.scrollHeight-t.clientHeight;window.scroll(0,e)}}});const et=(0,I.Z)(tt,[["render",o]]);var nt=et;(0,r.ri)(nt).mount("#app")},7832:function(t){t.exports=JSON.parse('{"~":{"cli":{"README.md":["txt","# 🎈 [cli](https://stonesaw.github.io/cli)\\nhttps://stonesaw.github.io/cli  \\n[ 🔨 Building now ...]  \\nImplement the cli interface on the web  \\n\\n\\n## ✨ Features\\n```bash\\nstonesaaw.github.io> cd portfolio\\n                     # => Redirecting to portfolio/\\n\\nstonesaaw.github.io> ls\\n                     # => portfolio/\\n                     # => blog/\\n                     # => ...\\n```\\n"],"repo.link":["link","https://github.com/stonesaw/cli"],"src":{"assets":{"logo.png":["img"]}}}}}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,s){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],i=t[c][1],s=t[c][2];for(var l=!0,a=0;a<r.length;a++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[a])}))?r.splice(a--,1):(l=!1,s<o&&(o=s));if(l){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,s,o=r[0],l=r[1],a=r[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var c=a(n)}for(e&&e(r);u<o.length;u++)s=o[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},r=self["webpackChunkcli"]=self["webpackChunkcli"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(198)}));r=n.O(r)})();
//# sourceMappingURL=app.ffefa7ce.js.map